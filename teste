<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Casamento Eduardo & Amanda</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: linear-gradient(135deg, #f7f4ff, #ffffff);
  color: #444;
  text-align: center;
  padding: 20px;
}
.container { max-width: 480px; margin: auto; }
h1 { color: #6a4bc3; }
p { font-size: 16px; line-height: 1.5; }
.hidden { display: none; }
.preview img,
.preview video { width: 100%; border-radius: 12px; margin-top: 15px; }
button {
  width: 100%;
  padding: 16px;
  margin-top: 12px;
  font-size: 16px;
  border-radius: 10px;
  border: none;
  cursor: pointer;
}
.start { background: #6a4bc3; color: #fff; }
.send { background: #2e7d32; color: #fff; }
.retry { background: #e0e0e0; }
.success { margin-top: 30px; font-size: 20px; color: #2e7d32; }
</style>
</head>

<body>
<div class="container">

<!-- BOAS-VINDAS -->
<div id="welcome">
  <h1>ğŸ’ Eduardo & Amanda</h1>
  <p>
    Obrigado por celebrar conosco â¤ï¸<br>
    Clique no botÃ£o abaixo para tirar sua foto ou gravar seu vÃ­deo!
  </p>
  <button id="startCamera" class="start">ğŸ“¸ ComeÃ§ar</button>
</div>

<!-- ESCOLHA DE CÃ‚MERA -->
<div id="cameraChoice" class="hidden">
  <p>Escolha a cÃ¢mera:</p>
  <button onclick="abrirCamera('user')">ğŸ“· Frontal</button>
  <button onclick="abrirCamera('environment')">ğŸ“¸ Traseira</button>
</div>

<!-- FORMULÃRIO -->
<form
  id="form"
  action="https://formsubmit.co/eduardo.goncalves27@gmail.com"
  method="POST"
  enctype="multipart/form-data"
  class="hidden"
>
  <input type="hidden" name="_captcha" value="false">
  <input type="hidden" name="_subject" value="Casamento Eduardo & Amanda - MÃ­dia enviada">

  <input
    id="file"
    type="file"
    name="arquivo"
    accept="image/*,video/*"
    capture
    class="hidden"
    required
  >

  <div id="preview" class="preview hidden"></div>

  <div id="actions" class="hidden">
    <button type="submit" class="send">ğŸ“¤ Enviar</button>
    <button type="button" class="retry" onclick="resetar()">ğŸ”„ Refazer</button>
  </div>
</form>

<!-- SUCESSO -->
<div id="success" class="success hidden">
  âœ… <strong>SALVO E ENVIADO!</strong><br><br>
  Muito obrigado por compartilhar esse momento especial ğŸ’–<br>
  Sua foto jÃ¡ pode aparecer na TV!
</div>

</div>

<script>
const startButton = document.getElementById("startCamera");
const cameraChoice = document.getElementById("cameraChoice");
const file = document.getElementById("file");
const preview = document.getElementById("preview");
const actions = document.getElementById("actions");
const welcome = document.getElementById("welcome");
const success = document.getElementById("success");
const form = document.getElementById("form");

// Mostrar escolha de cÃ¢mera apÃ³s clique
startButton.onclick = () => {
  welcome.classList.add("hidden");
  cameraChoice.classList.remove("hidden");
};

// Abrir cÃ¢mera conforme escolha
function abrirCamera(facingMode) {
  cameraChoice.classList.add("hidden");
  form.classList.remove("hidden");

  file.setAttribute('capture', facingMode); // frente ou traseira
  file.click();
}

// PrÃ©-visualizaÃ§Ã£o da foto/vÃ­deo
file.onchange = () => {
  const f = file.files[0];
  if (!f) return;

  if (f.size > 30 * 1024 * 1024) {
    alert("O arquivo deve ter no mÃ¡ximo 30MB.");
    resetar();
    return;
  }

  preview.innerHTML = "";
  let media;
  if (f.type.startsWith("image")) {
    media = document.createElement("img");
    media.src = URL.createObjectURL(f);
  } else {
    media = document.createElement("video");
    media.src = URL.createObjectURL(f);
    media.controls = true;
  }

  preview.appendChild(media);
  preview.classList.remove("hidden");
  actions.classList.remove("hidden");
  setTimeout(() => preview.scrollIntoView({ behavior: "smooth" }), 300);
};

// Resetar envio
function resetar() {
  file.value = "";
  preview.innerHTML = "";
  preview.classList.add("hidden");
  actions.classList.add("hidden");
  form.classList.add("hidden");
  cameraChoice.classList.add("hidden");
  welcome.classList.remove("hidden");
}

// Mensagem de sucesso e recarregar
form.onsubmit = () => {
  setTimeout(() => {
    form.classList.add("hidden");
    success.classList.remove("hidden");
    setTimeout(() => location.reload(), 5000);
  }, 1500);
};
</script>
</body>
</html>
